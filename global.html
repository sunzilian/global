<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
        <meta charset="utf-8">
        <title>初识canvas</title>
    </head>
    <body>
    <canvas
        id="canvas"
        style="border: 1px solid #aaa;display: block; margin: 50px;">
    </canvas>
    <div id="buttons">
        <a href="#">source-over</a>
        <a href="#">source-atop</a>
        <a href="#">source-in</a>
        <a href="#">source-out</a>
        <a href="#">destination-over</a>
        <a href="#">destination-atop</a>
        <a href="#">destination-in</a>
        <a href="#">destination-out</a>
        <a href="#">linghter</a>
        <a href="#">copy</a>
        <a href="#">xor</a>
    </div>
    </body>
    <script type="text/javascript">
    window.onload = function () {
        draw('source-over');

        let buttons = document.querySelectorAll('a');
        for (let i = 0; i < buttons.length; i++) {
            buttons[i].onclick = function () {
                draw(this.text);
                return false;
            };
        }
    };
    function draw(compositeStyle) {
        let canvas = document.getElementById('canvas');

        canvas.width = 1200;
        canvas.height = 800;

        let context = canvas.getContext('2d');

        context.clearRect(0, 0, canvas.width, canvas.height);

        context.font = 'bold 40px Arial';
        context.textAlign = 'center';
        context.textBaseline = 'middle';
        context.fillStyle = '#056';
        context.fillText('globalCompositeOperation = ' + compositeStyle, canvas.width / 2, 60);

        context.fillStyle = 'blue';
        context.fillRect(300, 150, 500, 500);

        // context.globalCompositeOperation = 'source-over';
        context.globalCompositeOperation = compositeStyle;
        context.fillStyle = 'red';
        context.beginPath();
        context.moveTo(400, 300);
        context.lineTo(650, 700);
        context.lineTo(150, 700);
        context.closePath();
        context.fill();
    }

    </script>
</html>
